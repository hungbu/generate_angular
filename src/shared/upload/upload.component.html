<mat-card 
  [class.dragover]="isDragging"
  (dragover)="onDragOver($event)"
  (dragleave)="onDragLeave($event)"
  (drop)="onDrop($event)">
  <mat-card-content>
    <div class="drop-zone">
      <input 
        hidden
        type="file"
        multiple
        #fileInput
        (change)="onFileSelected($event)">
      <button mat-raised-button (click)="fileInput.click()">
        <mat-icon>upload</mat-icon>
        Select Files
      </button>
      <p class="drag-text">or drag and drop files here</p>
    </div>
    <mat-list *ngIf="files.length > 0">
      <mat-list-item *ngFor="let file of files">
        <span class="file-name">{{ file.name }}</span>
        <span class="file-size">{{ formatBytes(file.size) }}</span>
        
        <!-- Show image preview if available -->
        <img *ngIf="filePreviews[file.name]" [src]="filePreviews[file.name]" alt="Preview" class="file-preview">

        <button mat-icon-button (click)="removeFile(file)">
          <mat-icon>delete</mat-icon>
        </button>
        <mat-progress-bar 
          *ngIf="uploadProgress[file.name] !== undefined"
          mode="determinate"
          [value]="uploadProgress[file.name]">
        </mat-progress-bar>
      </mat-list-item>
    </mat-list>
    <button 
      mat-raised-button 
      color="primary" 
      (click)="uploadFiles()"
      [disabled]="files.length === 0">
      Upload All
    </button>
  </mat-card-content>
</mat-card>